# Sitemap module for OXID eShop

[![Development](https://github.com/Fresh-Advance/Sitemap/actions/workflows/trigger.yml/badge.svg?branch=b-7.0.x)](https://github.com/Fresh-Advance/Sitemap/actions/workflows/trigger.yml)
[![Latest Version](https://img.shields.io/packagist/v/Fresh-Advance/Sitemap?logo=composer&label=latest&include_prereleases&color=orange)](https://packagist.org/packages/Fresh-Advance/Sitemap)
[![PHP Version](https://img.shields.io/packagist/php-v/Fresh-Advance/Sitemap)](https://github.com/Fresh-Advance/Sitemap)

[![Quality Gate Status](https://sonarcloud.io/api/project_badges/measure?project=Fresh-Advance_Sitemap&metric=alert_status)](https://sonarcloud.io/dashboard?id=Fresh-Advance_Sitemap)
[![Coverage](https://sonarcloud.io/api/project_badges/measure?project=Fresh-Advance_Sitemap&metric=coverage)](https://sonarcloud.io/dashboard?id=Fresh-Advance_Sitemap)
[![Technical Debt](https://sonarcloud.io/api/project_badges/measure?project=Fresh-Advance_Sitemap&metric=sqale_index)](https://sonarcloud.io/dashboard?id=Fresh-Advance_Sitemap)

**In development**

## The idea

There is a table (fa_sitemap) which will contain the list of all sitemap urls.
Urls are updated and added during the "fa:sitemap:update" commands.
The sitemap files are generated by "fa:sitemap:generate" command.

## Features

* Selectors implemented for:
  * Active categories
  * Active products (variants not checked yet)
  * Active content pages from 'User information' folder
  * Main page of the shop
* Removal of the urls by removal or deactivation of the related objects

## Compatibility

* Branch b-7.0.x is compatible with OXID Shop compilation 7.0.0-rc.2 and up

## Installation

Module is available on packagist and installable via composer and activate the module

```
composer require fresh-advance/sitemap
```

Also consider adding the line to `.htaccess` file:

```
RewriteRule ^sitemap.xml$    sitemap/sitemap.xml   [NC,L]
```

## Module usage

```shell
./vendor/bin/oe-console fa:sitemap:updateAll
./vendor/bin/oe-console fa:sitemap:generate
```

After the "generate" command, the sitemap index and sitemap pages will be generated in "source/sitemap" directory.

Note: Also its possible to update some concrete type of objects **IF needed** by some reason:

```shell
./vendor/bin/oe-console fa:sitemap:update general
./vendor/bin/oe-console fa:sitemap:update content
./vendor/bin/oe-console fa:sitemap:update category
./vendor/bin/oe-console fa:sitemap:update product
```

## What to expect in next versions

* Sitemap access without modifying the .htaccess
* Configurable sitemap directory
* Usability improvements
* Variants selectors
* Multilanguage support
* Multishop support

## License

The module is not free to use. Please make sure you checked the License before using the module.
